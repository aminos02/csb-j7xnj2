(this["webpackJsonpredux-essentials-example"]=this["webpackJsonpredux-essentials-example"]||[]).push([[0],{1332:function(t,e){},1349:function(t,e,n){"use strict";n.r(e);var r=n(59),s=n(5),a=n.n(s),c=n(3),o=n.n(c),i=n(81),u=n.n(i),d=(n(164),n(37)),j=n(13),l=n(4),b=function(){return Object(l.jsx)("nav",{children:Object(l.jsxs)("section",{children:[Object(l.jsx)("h1",{children:"Redux Advanced Example"}),Object(l.jsx)("div",{className:"navContent",children:Object(l.jsx)("div",{className:"navLinks",children:Object(l.jsx)(d.b,{to:"/",children:"Posts"})})})]})})},p=n(10),O=n(19),m=n(32),h=n(47),f=[{id:"0",title:"Post 1",content:"Hello!",date:Object(h.a)(new Date,{minutes:10}).toISOString(),user:"0",reactions:{thumbsUp:1,hooray:0,heart:0,rocket:0,eyes:0}},{id:"1",title:"Post 2",content:"More text",date:Object(h.a)(new Date,{minutes:5}).toISOString(),user:"1",reactions:{thumbsUp:3,hooray:0,heart:0,rocket:0,eyes:0}}],x=Object(m.b)({name:"posts",initialState:f,reducers:{addPost:{reducer:function(t,e){t.push(e.payload)},prepare:function(t,e,n){return{payload:{id:Object(m.c)(),date:(new Date).toISOString(),title:t,content:e,user:n,reactions:{thumbsUp:0,hooray:0,heart:0,rocket:0,eyes:0}}}}},reactionAdded:function(t,e){var n=e.payload,r=n.postId,s=n.reaction,a=t.find((function(t){return t.id===r}));a&&a.reactions[s]++},updatePost:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.id}));t[n]=e.payload}}}),v=x.actions,y=v.addPost,g=v.updatePost,S=v.reactionAdded,N=x.reducer,w=function(){var t=Object(c.useState)(""),e=Object(p.a)(t,2),n=e[0],r=e[1],s=Object(c.useState)(""),a=Object(p.a)(s,2),o=a[0],i=a[1],u=Object(c.useState)(""),d=Object(p.a)(u,2),j=d[0],b=d[1],m=Object(O.c)((function(t){return t.users})),h=Object(O.b)();return Object(l.jsxs)("section",{children:[Object(l.jsx)("h2",{children:"Add a New Post"}),Object(l.jsxs)("form",{children:[Object(l.jsxs)("label",{children:["Author:",Object(l.jsxs)("select",{onChange:function(t){return b(t.target.value)},children:[Object(l.jsx)("option",{value:""}),m.map((function(t){return Object(l.jsx)("option",{value:t.id,children:t.name},t.id)}))]})]}),Object(l.jsxs)("label",{children:[Object(l.jsx)("p",{style:{marginBottom:0},children:"Post Title:"}),Object(l.jsx)("input",{placeholder:"",value:n,onChange:function(t){return r(t.target.value)}})]}),Object(l.jsxs)("label",{children:["Content:",Object(l.jsx)("textarea",{placeholder:"",value:o,onChange:function(t){return i(t.target.value)}})]}),Object(l.jsxs)("button",{disabled:!(n&&o&&j),type:"button",onClick:function(){n&&o&&h(y(n,o,j)),r(""),i("")},children:["Save Post"," "]})]})]})},k=function(t){var e=t.match,n=Object(j.g)(),r=e.params.postid,s=Object(O.c)((function(t){return t.posts.find((function(t){return t.id===r}))})),a=Object(c.useState)(s.title),o=Object(p.a)(a,2),i=o[0],u=o[1],d=Object(c.useState)(s.content),b=Object(p.a)(d,2),m=b[0],h=b[1],f=Object(O.b)();return Object(l.jsxs)("section",{children:[Object(l.jsx)("h2",{children:"Edit Post"}),Object(l.jsxs)("form",{children:[Object(l.jsxs)("label",{children:[Object(l.jsx)("p",{style:{marginBottom:0},children:"Post Title:"}),Object(l.jsx)("input",{placeholder:"",value:i,onChange:function(t){return u(t.target.value)}})]}),Object(l.jsxs)("label",{children:["Content:",Object(l.jsx)("textarea",{placeholder:"",value:m,onChange:function(t){return h(t.target.value)}})]}),Object(l.jsx)("button",{disabled:!(i&&m),type:"button",onClick:function(){i&&m&&f(g({id:s.id,title:i,content:m})),u(""),h(""),n.push("/posts/".concat(s.id))},children:"Update Post"})]})]})},I=function(t){var e=t.userId,n=Object(O.c)((function(t){return t.users.find((function(t){return t.id===e}))}));return Object(l.jsxs)("span",{children:["by ",n?n.name:"Unknown author"]})},P={thumbsUp:"\ud83d\udc4d",hooray:"\ud83c\udf89",heart:"\u2764\ufe0f",rocket:"\ud83d\ude80",eyes:"\ud83d\udc40"},A=function(t){var e=t.post,n=Object(O.b)(),r=Object.entries(P).map((function(t){var r=Object(p.a)(t,2),s=r[0],a=r[1];return Object(l.jsxs)("button",{onClick:function(){return n(S({postId:e.id,reaction:s}))},type:"button",className:"muted-button reaction-button",children:[a," ",e.reactions[s]]},s)}));return Object(l.jsx)("div",{children:r})},C=n(112),D=n(113),M=function(t){var e=t.timestamp,n="";if(e){var r=Object(C.a)(e),s=Object(D.a)(r);n="".concat(s," ago")}return Object(l.jsxs)("span",{title:e,children:["\xa0 ",Object(l.jsx)("i",{children:n})]})},U=function(){var t=Object(O.c)((function(t){return t.posts})).slice().sort((function(t,e){return e.date.localeCompare(t.date)})).map((function(t){return Object(l.jsxs)("article",{className:"post-excerpt",children:[Object(l.jsx)("h3",{children:t.title}),Object(l.jsxs)("div",{children:[Object(l.jsx)(I,{userId:t.user}),Object(l.jsx)(M,{timestamp:t.date})]}),Object(l.jsx)("p",{className:"post-content",children:t.content.substring(0,100)}),t.reactions?Object(l.jsx)(A,{post:t}):null,Object(l.jsx)(d.b,{to:"/posts/".concat(t.id),className:"button muted-button",children:"View Post"}),Object(l.jsx)(d.b,{to:"/editPost/".concat(t.id),className:"button muted-button",style:{marginLeft:50},children:"Edit post"})]},t.id)}));return Object(l.jsxs)("section",{className:"posts-list",children:[Object(l.jsx)("h2",{children:"Posts"}),t]})},q=function(t){var e=t.match.params.postid,n=Object(O.c)((function(t){return t.posts.find((function(t){return t.id===e}))})),r=Object(O.c)((function(t){return t.users.find((function(t){return t.id===n.user}))}));return Object(l.jsx)("section",{children:n?Object(l.jsxs)("article",{children:[Object(l.jsxs)("h2",{children:[n.title," "]}),Object(l.jsxs)("p",{children:["created by ",null===r||void 0===r?void 0:r.name," "]}),Object(l.jsx)("p",{className:"post-content",children:n.content}),Object(l.jsx)(d.b,{to:"/editPost/".concat(n.id),className:"button",children:"Edit Post"})]}):Object(l.jsx)("h2",{children:"Post Not Found"})})};var F,T=function(){return Object(l.jsxs)(d.a,{children:[Object(l.jsx)(b,{}),Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)(j.d,{children:[Object(l.jsx)(j.b,{exact:!0,path:"/",render:function(){return Object(l.jsxs)(o.a.Fragment,{children:[Object(l.jsx)(w,{}),Object(l.jsx)(U,{})]})}}),Object(l.jsx)(j.b,{exact:!0,path:"/posts/:postid",component:q}),Object(l.jsx)(j.b,{exact:!0,path:"/editPost/:postid",component:k}),Object(l.jsx)(j.a,{to:"/"})]})})]})},E=Object(m.b)({name:"users",initialState:[{id:"0",name:"Tianna Jenkins"},{id:"1",name:"Kevin Grant"},{id:"2",name:"Madison Price"}],reducers:{}}).reducer,J=Object(m.a)({reducer:{posts:N,users:E}}),K=n(18),B=n(46),R=n(148),L=n(48),G=n(36),H=n(157),V=n(33),z=n(40),Q=n.n(z),W=n(110),X=n.n(W),Y=n(152),Z=n(153),$=["id"],_=2e3,tt=X()(),et=localStorage.getItem("randomTimestampSeed");function nt(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(tt()*(e-t+1))+t}et?F=new Date(et):(et=(F=new Date).toISOString(),localStorage.setItem("randomTimestampSeed",et)),tt=X()(et),Object(Z.setRandom)(tt),Q.a.seed(F.getTime());for(var rt,st=function(t){return t[nt(0,t.length-1)]},at=Object(V.factory)({user:{id:Object(V.primaryKey)(m.c),firstName:String,lastName:String,name:String,username:String,posts:Object(V.manyOf)("post")},post:{id:Object(V.primaryKey)(m.c),title:String,date:String,content:String,reactions:Object(V.oneOf)("reaction"),comments:Object(V.manyOf)("comment"),user:Object(V.oneOf)("user")},comment:{id:Object(V.primaryKey)(String),date:String,text:String,post:Object(V.oneOf)("post")},reaction:{id:Object(V.primaryKey)(m.c),thumbsUp:Number,hooray:Number,heart:Number,rocket:Number,eyes:Number,post:Object(V.oneOf)("post")}}),ct=function(){var t=Q.a.name.firstName(),e=Q.a.name.lastName();return{firstName:t,lastName:e,name:"".concat(t," ").concat(e),username:Q.a.internet.userName()}},ot=0;ot<3;ot++)for(var it=at.user.create(ct()),ut=0;ut<3;ut++){var dt=(rt=it,{title:Q.a.lorem.words(),date:Q.a.date.recent(7).toISOString(),user:rt,content:Q.a.lorem.paragraphs(),reactions:at.reaction.create()});at.post.create(dt)}var jt=function(t){return Object(L.a)(Object(L.a)({},t),{},{user:t.user.id})},lt=[G.c.get("/fakeApi/posts",(function(t,e,n){var r=at.post.getAll().map(jt);return e(n.delay(_),n.json(r))})),G.c.post("/fakeApi/posts",(function(t,e,n){var r=t.body;if("error"===r.content)return e(n.delay(_),n.status(500),n.json("Server error saving this post!"));r.date=(new Date).toISOString();var s=at.user.findFirst({where:{id:{equals:r.user}}});r.user=s,r.reactions=at.reaction.create();var a=at.post.create(r);return e(n.delay(_),n.json(jt(a)))})),G.c.get("/fakeApi/posts/:postId",(function(t,e,n){var r=at.post.findFirst({where:{id:{equals:t.params.postId}}});return e(n.delay(_),n.json(jt(r)))})),G.c.patch("/fakeApi/posts/:postId",(function(t,e,n){var r=t.body,s=(r.id,Object(R.a)(r,$)),a=at.post.update({where:{id:{equals:t.params.postId}},data:s});return e(n.delay(_),n.json(jt(a)))})),G.c.get("/fakeApi/posts/:postId/comments",(function(t,e,n){var r=at.post.findFirst({where:{id:{equals:t.params.postId}}});return e(n.delay(_),n.json({comments:r.comments}))})),G.c.post("/fakeApi/posts/:postId/reactions",(function(t,e,n){var r=t.params.postId,s=t.body.reaction,a=at.post.findFirst({where:{id:{equals:r}}}),c=at.post.update({where:{id:{equals:r}},data:{reactions:Object(L.a)(Object(L.a)({},a.reactions),{},Object(B.a)({},s,a.reactions[s]+=1))}});return e(n.delay(_),n.json(jt(c)))})),G.c.get("/fakeApi/notifications",(function(t,e,n){var r=ht(void 0,nt(1,5),at);return e(n.delay(_),n.json(r))})),G.c.get("/fakeApi/users",(function(t,e,n){return e(n.delay(_),n.json(at.user.getAll()))}))],bt=H.a.apply(void 0,lt),pt=new Y.Server("ws://localhost"),Ot=function(t,e){!function(t,e){t.send(JSON.stringify(e))}(t,{type:"notifications",payload:ht(e,nt(1,5),at)})};pt.on("connection",(function(t){t,t.on("message",(function(e){var n=JSON.parse(e);if("notifications"===n.type){var r=n.payload;Ot(t,r)}}))}));var mt=["poked you","says hi!","is glad we're friends","sent you a gift"];function ht(t,e,n){var r,s=new Date;t?r=Object(C.a)(t):(r=new Date(s.valueOf())).setMinutes(r.getMinutes()-15);var a=Object(K.a)(Array(e)).map((function(){var t=st(n.user.getAll()),e=st(mt);return{id:Object(m.c)(),date:Q.a.date.between(r,s).toISOString(),message:e,user:t.id}}));return a}function ft(){return(ft=Object(r.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,bt.start({onUnhandledRequest:"bypass"});case 2:u.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(O.a,{store:J,children:Object(l.jsx)(T,{})})}),document.getElementById("root"));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){ft.apply(this,arguments)}()},164:function(t,e,n){}},[[1349,1,2]]]);
//# sourceMappingURL=main.b9f12d31.chunk.js.map